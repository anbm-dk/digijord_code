values_to = "y_value",
) %>%
ggplot(
aes(
x = x_value,
y = y_value
)
) +
geom_point(alpha = .01, shape = 16) +
facet_grid(
factor(Fraction, levels = fractions) ~ Covariate,
scales = "free"
) +
geom_smooth(
se = FALSE,
color = "red"
) +
labs(
x = "Covariate value",
y = "Observation"
) +
scale_x_continuous(
n.breaks = 3,
labels = label_number(scale_cut = cut_short_scale())
) +
scale_y_continuous(n.breaks = 3)
obs_top %>%
select(all_of(figure_cols)) %>%
sample_frac(0.1) %>%
mutate(
s1_baresoil_composite_vh_8_days = ifelse(
s1_baresoil_composite_vh_8_days == 0 | s1_baresoil_composite_vh_8_days < -3000,
NA,
s1_baresoil_composite_vh_8_days
),
s2_geomedian_20180501_20180731_b7 = ifelse(
s2_geomedian_20180501_20180731_b7 > 2000,
NA,
s2_geomedian_20180501_20180731_b7
),
logCaCO3 = ifelse(
is.finite(logCaCO3),
logCaCO3,
NA
),
logSOC = ifelse(
logSOC > -2.5,
logSOC,
NA
),
clay = ifelse(
clay < 30,
clay,
NA
),
silt = ifelse(
silt < 30,
silt,
NA
)
) %>%
rename(
DEM = dhm2015_terraen_10m,
UTMX = ogc_lite_pi0000,
S1_bare_vh = s1_baresoil_composite_vh_8_days,
S2_summer_b7 = s2_geomedian_20180501_20180731_b7,
S2_bare_b3 = s2_geomedian_b3
) %>%
pivot_longer(
all_of(short_names),
names_to = "Covariate",
values_to = "x_value"
) %>%
pivot_longer(
all_of(fractions),
names_to = "Fraction",
values_to = "y_value",
) %>%
ggplot(
aes(
x = x_value,
y = y_value
)
) +
geom_point(alpha = .01, shape = 16) +
facet_grid(
factor(Fraction, levels = fractions) ~ Covariate,
scales = "free"
) +
geom_smooth(
se = FALSE,
color = "red"
) +
labs(
x = "Covariate value",
y = "Observation"
) +
scale_x_continuous(
n.breaks = 3,
labels = label_number(scale_cut = cut_short_scale())
) +
scale_y_continuous(n.breaks = 3)
obs_top %>%
select(all_of(figure_cols)) %>%
sample_frac(0.1) %>%
mutate(
s1_baresoil_composite_vh_8_days = ifelse(
s1_baresoil_composite_vh_8_days == 0 | s1_baresoil_composite_vh_8_days < -3000,
NA,
s1_baresoil_composite_vh_8_days
),
s2_geomedian_b3 = ifelse(
s2_geomedian_b3 > 2000,
NA,
s2_geomedian_b3
),
logCaCO3 = ifelse(
is.finite(logCaCO3),
logCaCO3,
NA
),
logSOC = ifelse(
logSOC > -2.5,
logSOC,
NA
),
clay = ifelse(
clay < 30,
clay,
NA
),
silt = ifelse(
silt < 30,
silt,
NA
)
) %>%
rename(
DEM = dhm2015_terraen_10m,
UTMX = ogc_lite_pi0000,
S1_bare_vh = s1_baresoil_composite_vh_8_days,
S2_summer_b7 = s2_geomedian_20180501_20180731_b7,
S2_bare_b3 = s2_geomedian_b3
) %>%
pivot_longer(
all_of(short_names),
names_to = "Covariate",
values_to = "x_value"
) %>%
pivot_longer(
all_of(fractions),
names_to = "Fraction",
values_to = "y_value",
) %>%
ggplot(
aes(
x = x_value,
y = y_value
)
) +
geom_point(alpha = .01, shape = 16) +
facet_grid(
factor(Fraction, levels = fractions) ~ Covariate,
scales = "free"
) +
geom_smooth(
se = FALSE,
color = "red"
) +
labs(
x = "Covariate value",
y = "Observation"
) +
scale_x_continuous(
n.breaks = 3,
labels = label_number(scale_cut = cut_short_scale())
) +
scale_y_continuous(n.breaks = 3)
tiff(
paste0(dir_results, "/covariate_effects_test", testn, ".tiff"),
width = 15,
height = 10,
units = "cm",
res = 300
)
obs_top %>%
select(all_of(figure_cols)) %>%
# sample_frac(0.1) %>%
mutate(
s1_baresoil_composite_vh_8_days = ifelse(
s1_baresoil_composite_vh_8_days == 0 | s1_baresoil_composite_vh_8_days < -3000,
NA,
s1_baresoil_composite_vh_8_days
),
s2_geomedian_b3 = ifelse(
s2_geomedian_b3 > 2000,
NA,
s2_geomedian_b3
),
logCaCO3 = ifelse(
is.finite(logCaCO3),
logCaCO3,
NA
),
logSOC = ifelse(
logSOC > -2.5,
logSOC,
NA
),
clay = ifelse(
clay < 30,
clay,
NA
),
silt = ifelse(
silt < 30,
silt,
NA
)
) %>%
rename(
DEM = dhm2015_terraen_10m,
UTMX = ogc_lite_pi0000,
S1_bare_vh = s1_baresoil_composite_vh_8_days,
S2_summer_b7 = s2_geomedian_20180501_20180731_b7,
S2_bare_b3 = s2_geomedian_b3
) %>%
pivot_longer(
all_of(short_names),
names_to = "Covariate",
values_to = "x_value"
) %>%
pivot_longer(
all_of(fractions),
names_to = "Fraction",
values_to = "y_value",
) %>%
ggplot(
aes(
x = x_value,
y = y_value
)
) +
geom_point(alpha = .01, shape = 16) +
facet_grid(
factor(Fraction, levels = fractions) ~ Covariate,
scales = "free"
) +
geom_smooth(
se = FALSE,
color = "red"
) +
labs(
x = "Covariate value",
y = "Observation"
) +
scale_x_continuous(
n.breaks = 3,
labels = label_number(scale_cut = cut_short_scale())
) +
scale_y_continuous(n.breaks = 3)
dev.off()
dev.off()
obs_top %>%
select(all_of(figure_cols)) %>%
sample_frac(0.1) %>%
mutate(
s1_baresoil_composite_vh_8_days = ifelse(
s1_baresoil_composite_vh_8_days == 0 | s1_baresoil_composite_vh_8_days < -3000,
NA,
s1_baresoil_composite_vh_8_days
),
s2_geomedian_b3 = ifelse(
s2_geomedian_b3 > 2000,
NA,
s2_geomedian_b3
),
logCaCO3 = ifelse(
is.finite(logCaCO3),
logCaCO3,
NA
),
logSOC = ifelse(
logSOC > -2.5,
logSOC,
NA
),
clay = ifelse(
clay < 30,
clay,
NA
),
silt = ifelse(
silt < 30,
silt,
NA
)
) %>%
rename(
DEM = dhm2015_terraen_10m,
UTMX = ogc_lite_pi0000,
S1_bare_vh = s1_baresoil_composite_vh_8_days,
S2_summer_b7 = s2_geomedian_20180501_20180731_b7,
S2_bare_b3 = s2_geomedian_b3
) %>%
pivot_longer(
all_of(short_names),
names_to = "Covariate",
values_to = "x_value"
) %>%
pivot_longer(
all_of(fractions),
names_to = "Fraction",
values_to = "y_value",
) %>%
ggplot(
aes(
x = x_value,
y = y_value
)
) +
geom_point(alpha = .01, shape = 16) +
facet_grid(
factor(Fraction, levels = fractions) ~ Covariate,
scales = "free"
) +
geom_smooth(
se = FALSE,
color = "red"
) +
labs(
x = "Covariate value",
y = "Observation (%)"
) +
scale_x_continuous(
n.breaks = 3,
labels = label_number(scale_cut = cut_short_scale())
) +
scale_y_continuous(n.breaks = 3) +
theme(strip.text.y.right = element_text(angle = 0))
tiff(
paste0(dir_results, "/covariate_effects_test", testn, ".tiff"),
width = 15,
height = 10,
units = "cm",
res = 300
)
obs_top %>%
select(all_of(figure_cols)) %>%
# sample_frac(0.1) %>%
mutate(
s1_baresoil_composite_vh_8_days = ifelse(
s1_baresoil_composite_vh_8_days == 0 | s1_baresoil_composite_vh_8_days < -3000,
NA,
s1_baresoil_composite_vh_8_days
),
s2_geomedian_b3 = ifelse(
s2_geomedian_b3 > 2000,
NA,
s2_geomedian_b3
),
logCaCO3 = ifelse(
is.finite(logCaCO3),
logCaCO3,
NA
),
logSOC = ifelse(
logSOC > -2.5,
logSOC,
NA
),
clay = ifelse(
clay < 30,
clay,
NA
),
silt = ifelse(
silt < 30,
silt,
NA
)
) %>%
rename(
DEM = dhm2015_terraen_10m,
UTMX = ogc_lite_pi0000,
S1_bare_vh = s1_baresoil_composite_vh_8_days,
S2_summer_b7 = s2_geomedian_20180501_20180731_b7,
S2_bare_b3 = s2_geomedian_b3
) %>%
pivot_longer(
all_of(short_names),
names_to = "Covariate",
values_to = "x_value"
) %>%
pivot_longer(
all_of(fractions),
names_to = "Fraction",
values_to = "y_value",
) %>%
ggplot(
aes(
x = x_value,
y = y_value
)
) +
geom_point(alpha = .01, shape = 16) +
facet_grid(
factor(Fraction, levels = fractions) ~ Covariate,
scales = "free"
) +
geom_smooth(
se = FALSE,
color = "red"
) +
labs(
x = "Covariate value",
y = "Observation (%)"
) +
scale_x_continuous(
n.breaks = 3,
labels = label_number(scale_cut = cut_short_scale())
) +
scale_y_continuous(n.breaks = 3) +
theme(strip.text.y.right = element_text(angle = 0))
dev.off()
dev.off()
tiff(
paste0(dir_results, "/covariate_effects_test", testn, ".tiff"),
width = 16,
height = 10,
units = "cm",
res = 300
)
obs_top %>%
select(all_of(figure_cols)) %>%
# sample_frac(0.1) %>%
mutate(
s1_baresoil_composite_vh_8_days = ifelse(
s1_baresoil_composite_vh_8_days == 0 | s1_baresoil_composite_vh_8_days < -3000,
NA,
s1_baresoil_composite_vh_8_days
),
s2_geomedian_b3 = ifelse(
s2_geomedian_b3 > 2000,
NA,
s2_geomedian_b3
),
logCaCO3 = ifelse(
is.finite(logCaCO3),
logCaCO3,
NA
),
logSOC = ifelse(
logSOC > -2.5,
logSOC,
NA
),
clay = ifelse(
clay < 30,
clay,
NA
),
silt = ifelse(
silt < 30,
silt,
NA
)
) %>%
rename(
DEM = dhm2015_terraen_10m,
UTMX = ogc_lite_pi0000,
S1_bare_vh = s1_baresoil_composite_vh_8_days,
S2_summer_b7 = s2_geomedian_20180501_20180731_b7,
S2_bare_b3 = s2_geomedian_b3
) %>%
pivot_longer(
all_of(short_names),
names_to = "Covariate",
values_to = "x_value"
) %>%
pivot_longer(
all_of(fractions),
names_to = "Fraction",
values_to = "y_value",
) %>%
ggplot(
aes(
x = x_value,
y = y_value
)
) +
geom_point(alpha = .01, shape = 16) +
facet_grid(
factor(Fraction, levels = fractions) ~ Covariate,
scales = "free"
) +
geom_smooth(
se = FALSE,
color = "red"
) +
labs(
x = "Covariate value",
y = "Observation (%)"
) +
scale_x_continuous(
n.breaks = 3,
labels = label_number(scale_cut = cut_short_scale())
) +
scale_y_continuous(n.breaks = 3) +
theme(strip.text.y.right = element_text(angle = 0))
dev.off()
dev.off()
