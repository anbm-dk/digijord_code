)
s2_time_imp
s2_time_imp$band
s2_time_imp <- l %>%
filter(
category == "S2 time series",
fraction != "Fine~sand"
) %>%
group_by(fraction, Covariate) %>%
summarise(Importance = sum(Importance)/100) %>%
mutate(
band = substr(
Covariate,
32,
nchar(Covariate)
),
band = factor(band, levels = s2_bandnames),
time = substr(
Covariate,
14,
21
)
)
s2_bandnames <- c("b2", "b3", "b4", "b5", "b6", "b7", "b8", "b8a", "b11", "b12")
s2_time_imp <- l %>%
filter(
category == "S2 time series",
fraction != "Fine~sand"
) %>%
group_by(fraction, Covariate) %>%
summarise(Importance = sum(Importance)/100) %>%
mutate(
band = substr(
Covariate,
32,
nchar(Covariate)
),
band = factor(band, levels = s2_bandnames),
time = substr(
Covariate,
14,
21
)
)
s2_time_imp %>%
ggplot(aes(x = Importance, y = band, colour = time)) +
geom_point() +
facet_wrap(~ fraction)
s2_time_imp %>%
ggplot(aes(x = Importance, y = band, colour = time)) +
geom_point() +
facet_wrap(~ fraction) +
scale_y_discrete(limits = rev)
s2_time_imp %>%
ggplot(aes(x = Importance, y = band, colour = time)) +
geom_point() +
facet_wrap(~ fraction, labeller = label_parsed) +
scale_y_discrete(limits = rev)
s2_time_imp <- l %>%
filter(
category == "S2 time series",
fraction != "Fine~sand"
) %>%
group_by(fraction, Covariate) %>%
summarise(Importance = sum(Importance)/100) %>%
mutate(
band = substr(
Covariate,
32,
nchar(Covariate)
),
band = factor(band, levels = s2_bandnames),
time = substr(
Covariate,
14,
21
)
) %>%
group_by(fraction) %>%
mutate(Importance = Importance/sum(Importance))
s2_time_imp %>%
ggplot(aes(x = Importance, y = band, colour = time)) +
geom_point() +
facet_wrap(~ fraction, labeller = label_parsed) +
scale_y_discrete(limits = rev)
s2_time_imp %>%
ggplot(aes(x = Importance, y = band, colour = time)) +
geom_point() +
facet_wrap(
~ fraction,
nrow = 1,
labeller = label_parsed) +
scale_y_discrete(limits = rev)
s2_time_imp %>%
ggplot(aes(x = Importance, y = band, colour = time, shape = time)) +
geom_point() +
facet_wrap(
~ fraction,
nrow = 1,
labeller = label_parsed) +
scale_y_discrete(limits = rev)
s2_time_imp %>%
ggplot(aes(x = Importance, y = band, colour = time, shape = time)) +
geom_point() +
geom_line() +
facet_wrap(
~ fraction,
nrow = 1,
labeller = label_parsed) +
scale_y_discrete(limits = rev)
s2_time_imp %>%
ggplot(aes(x = Importance, y = band, colour = time, shape = time)) +
geom_point() +
geom_path() +
facet_wrap(
~ fraction,
nrow = 1,
labeller = label_parsed) +
scale_y_discrete(limits = rev)
s2_time_imp %>%
ggplot(aes(x = Importance, y = band, colour = time, shape = time)) +
geom_point() +
geom_path(orientation = "y") +
facet_wrap(
~ fraction,
nrow = 1,
labeller = label_parsed) +
scale_y_discrete(limits = rev)
s2_time_imp %>%
ggplot(aes(x = Importance, y = band, colour = time, shape = time)) +
geom_point() +
geom_line(orientation = "y") +
facet_wrap(
~ fraction,
nrow = 1,
labeller = label_parsed) +
scale_y_discrete(limits = rev)
s2_time_imp <- l %>%
filter(
category == "S2 time series",
fraction != "Fine~sand"
) %>%
group_by(fraction, Covariate) %>%
summarise(Importance = sum(Importance)/100) %>%
mutate(
band = substr(
Covariate,
32,
nchar(Covariate)
),
band = factor(band, levels = s2_bandnames),
time = substr(
Covariate,
14,
21
)
) %>%
group_by(fraction) %>%
mutate(Importance = Importance/sum(Importance)) %>%
ungroup()
s2_time_imp %>%
ggplot(aes(x = Importance, y = band, colour = time, shape = time)) +
geom_point() +
geom_line(orientation = "y") +
facet_wrap(
~ fraction,
nrow = 1,
labeller = label_parsed) +
scale_y_discrete(limits = rev)
s2_time_imp %>%
ggplot(
aes(
x = Importance,
y = band,
colour = time,
shape = time,
group = 1)
) +
geom_point() +
geom_line(orientation = "y") +
facet_wrap(
~ fraction,
nrow = 1,
labeller = label_parsed) +
scale_y_discrete(limits = rev)
s2_time_imp %>%
ggplot(
aes(
x = Importance,
y = band,
colour = time,
shape = time,
group = 3)
) +
geom_point() +
geom_line(orientation = "y") +
facet_wrap(
~ fraction,
nrow = 1,
labeller = label_parsed) +
scale_y_discrete(limits = rev)
s2_time_imp %>%
ggplot(
aes(
x = Importance,
y = band,
colour = time,
shape = time,
group = time
)
) +
geom_point() +
geom_line(orientation = "y") +
facet_wrap(
~ fraction,
nrow = 1,
labeller = label_parsed) +
scale_y_discrete(limits = rev)
s2_time_imp %>%
ggplot(
aes(
x = Importance,
y = Band,
colour = Time,
shape = Time,
group = Time,
linetype = Time
)
) +
geom_point() +
geom_line(orientation = "y") +
facet_wrap(
~ fraction,
nrow = 1,
labeller = label_parsed) +
scale_y_discrete(limits = rev)
s2_time_imp <- l %>%
filter(
category == "S2 time series",
fraction != "Fine~sand"
) %>%
group_by(fraction, Covariate) %>%
summarise(Importance = sum(Importance)/100) %>%
mutate(
Band = substr(
Covariate,
32,
nchar(Covariate)
),
Band = factor(Band, levels = s2_bandnames),
Time = substr(
Covariate,
14,
21
)
) %>%
group_by(fraction) %>%
mutate(Importance = Importance/sum(Importance)) %>%
ungroup()
s2_time_imp %>%
ggplot(
aes(
x = Importance,
y = Band,
colour = Time,
shape = Time,
group = Time,
linetype = Time
)
) +
geom_point() +
geom_line(orientation = "y") +
facet_wrap(
~ fraction,
nrow = 1,
labeller = label_parsed) +
scale_y_discrete(limits = rev)
s2_time_imp <- l %>%
filter(
category == "S2 time series",
fraction != "Fine~sand"
) %>%
group_by(fraction, Covariate) %>%
summarise(Importance = sum(Importance)/100) %>%
mutate(
Band = substr(
Covariate,
32,
nchar(Covariate)
),
Band = factor(Band, levels = s2_bandnames),
Time = substr(
Covariate,
14,
21
),
Time = factor(Time, labels = c("Spring", "June", "July"))
) %>%
group_by(fraction) %>%
mutate(Importance = Importance/sum(Importance)) %>%
ungroup()
s2_time_imp %>%
ggplot(
aes(
x = Importance,
y = Band,
colour = Time,
shape = Time,
group = Time,
linetype = Time
)
) +
geom_point() +
geom_line(orientation = "y") +
facet_wrap(
~ fraction,
nrow = 1,
labeller = label_parsed) +
scale_y_discrete(limits = rev)
s2_bandnames <- c("b2", "b3", "b4", "b5", "b6", "b7", "b8", "b8a", "b11", "b12")
s2_bandlabels <- c("2", "3", "4", "5", "6", "7", "8", "8a", "11", "12")
s2_time_imp <- l %>%
filter(
category == "S2 time series",
fraction != "Fine~sand"
) %>%
group_by(fraction, Covariate) %>%
summarise(Importance = sum(Importance)/100) %>%
mutate(
Band = substr(
Covariate,
32,
nchar(Covariate)
),
Band = factor(
Band,
levels = s2_bandnames,
labels = s2_bandlabels
),
Time = substr(
Covariate,
14,
21
),
Time = factor(Time, labels = c("Spring", "June", "July"))
) %>%
group_by(fraction) %>%
mutate(Importance = Importance/sum(Importance)) %>%
ungroup()
s2_time_imp %>%
ggplot(
aes(
x = Importance,
y = Band,
colour = Time,
shape = Time,
group = Time,
linetype = Time
)
) +
geom_point() +
geom_line(orientation = "y") +
facet_wrap(
~ fraction,
nrow = 1,
labeller = label_parsed) +
scale_y_discrete(limits = rev)
tiff(
paste0(dir_results, "/boot_importance_s2_test", testn, ".tiff"),
width = 16,
height = 10,
units = "cm",
res = 600
)
s2_time_imp %>%
ggplot(
aes(
x = Importance,
y = Band,
colour = Time,
shape = Time,
group = Time,
linetype = Time
)
) +
geom_point() +
geom_line(orientation = "y") +
facet_wrap(
~ fraction,
nrow = 1,
labeller = label_parsed) +
scale_y_discrete(limits = rev)
try(dev.off())
l
l %>%
filter(
category == "S2 time series",
fraction != "Fine~sand"
) %>%
select(fraction, Covariate, Importance) %>%
group_by(fraction, Covariate) %>%
summarise(
Importance = sum(Importance)/100
)
l %>%
filter(fraction != "Fine~sand") %>%
select(fraction, Covariate, Importance) %>%
group_by(fraction, Covariate) %>%
summarise(
Importance = sum(Importance)/100
) %>%
filter(Importance > 0)
l %>%
filter(fraction != "Fine~sand") %>%
select(fraction, Covariate, Importance) %>%
group_by(fraction, Covariate) %>%
summarise(
Importance = sum(Importance)/100
) %>%
filter(Importance > 0) %>%
arrange(Importance)
l %>%
mutate(fraction = factor(fraction, labels = fraction_names))
l %>%
mutate(fraction = factor(fraction, labels = fraction_names))
filter(fraction != "Fine~sand") %>%
select(fraction, Covariate, Importance) %>%
group_by(fraction, Covariate) %>%
summarise(
Importance = sum(Importance)/100
) %>%
filter(Importance > 0) %>%
arrange(-Importance)
l %>%
mutate(fraction = factor(fraction, labels = fraction_names)) %>%
filter(fraction != "Fine~sand") %>%
select(fraction, Covariate, Importance) %>%
group_by(fraction, Covariate) %>%
summarise(
Importance = sum(Importance)/100
) %>%
filter(Importance > 0) %>%
arrange(-Importance)
?slice_head
l %>%
mutate(fraction = factor(fraction, labels = fraction_names)) %>%
filter(fraction != "Fine~sand") %>%
select(fraction, Covariate, Importance) %>%
group_by(fraction, Covariate) %>%
summarise(
Importance = sum(Importance)/100
) %>%
filter(Importance > 0) %>%
group_by(fraction) %>%
arrange(-Importance) %>%
slice_head(n = 20)
l %>%
mutate(fraction = factor(fraction, labels = fraction_names)) %>%
filter(fraction != "Fine~sand") %>%
select(fraction, Covariate, Importance) %>%
group_by(fraction, Covariate) %>%
summarise(
Importance = sum(Importance)/100
) %>%
filter(Importance > 0) %>%
group_by(fraction) %>%
arrange(-Importance) %>%
slice_head(n = 20) %>%
as.data.frame()
l %>%
mutate(fraction = factor(fraction, labels = fraction_names)) %>%
filter(fraction != "Fine sand") %>%
select(fraction, Covariate, Importance) %>%
group_by(fraction, Covariate) %>%
summarise(
Importance = sum(Importance)/100
) %>%
filter(Importance > 0) %>%
group_by(fraction) %>%
arrange(-Importance) %>%
slice_head(n = 20) %>%
as.data.frame()
l %>%
mutate(fraction = factor(fraction, labels = fraction_names)) %>%
filter(fraction != "Fine sand") %>%
select(fraction, Covariate, Importance) %>%
group_by(fraction, Covariate) %>%
summarise(
Importance = sum(Importance)/100
) %>%
filter(Importance > 0) %>%
group_by(fraction) %>%
arrange(-Importance) %>%
slice_head(n = 20) %>%
write.table(
paste0(dir_results, "/varImp_top20.csv"),
sep = ";",
row.names = FALSE
)
l$fraction %>% unique()
l %>%
select(fraction, Covariate, rep, Importance, category) %>%
filter(
!(Covariate %in% grep('ogc_pi', Covariate, value = TRUE)),
!(Covariate %in% c("upper", "lower", "SOM_removed")),
fraction != "Fine~sand"
) %>%
group_by(Covariate) %>%
summarise(mean = mean(Importance)) %>%
ungroup() %>%
arrange(-mean) %>%
slice_head(n = 10)
